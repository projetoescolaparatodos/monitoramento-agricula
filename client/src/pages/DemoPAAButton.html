
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Botão PAA</title>
  <style>
    .paa-button {
      background-color: #f59e0b;
      color: white;
      border: none;
      padding: 10px 15px;
      border-radius: 4px;
      cursor: pointer;
      display: flex;
      align-items: center;
      font-family: sans-serif;
    }
    .paa-button:hover {
      background-color: #d97706;
    }
    .icon {
      margin-right: 8px;
    }
  </style>
</head>
<body>
  <h1>Teste de botão PAA</h1>
  
  <button class="paa-button" onclick="openChatPAA()">
    <svg class="icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M21 15s-2-4-2-5.5A5.5 5.5 0 0 0 13.5 4h-3A5.5 5.5 0 0 0 5 9.5 5.5 5.5 0 0 0 10.5 15h5"></path>
      <circle cx="18" cy="18" r="3"></circle>
    </svg>
    Abrir Chat PAA
  </button>

  <script>
    function openChatPAA() {
      // Salvar a preferência no localStorage
      localStorage.setItem('chatbot_tab', 'paa');
      
      // Definir a âncora na URL para persistir a intenção
      window.location.hash = `chatbot-tab=paa`;
      
      // Abrir o chatbot primeiro
      const chatbotButton = document.querySelector('[data-chatbot-button]');
      if (chatbotButton) {
        // Primeiro clique para abrir o chatbot
        chatbotButton.click();
        console.log("Abrindo chatbot");
        
        // Aguardar tempo suficiente para o chatbot abrir completamente
        setTimeout(() => {
          // Disparar o evento personalizado após o chatbot abrir
          window.dispatchEvent(new CustomEvent('open-chatbot', { detail: { tab: 'paa' } }));
          console.log("Evento disparado");
          
          // Tentar clicar na aba PAA
          const paaTab = document.querySelector('[value="paa"]');
          if (paaTab) {
            paaTab.click();
            console.log("Clicou na aba PAA");
          } else {
            // Se não encontrou na primeira tentativa, tentar novamente após um intervalo
            setTimeout(() => {
              const retryPaaTab = document.querySelector('[value="paa"]');
              if (retryPaaTab) {
                retryPaaTab.click();
                console.log("Clicou na aba PAA (segunda tentativa)");
              }
            }, 200);
          }
        }, 400); // Aumentado para 400ms
      }
    }
  </script>
</body>
</html>
